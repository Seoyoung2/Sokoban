#include <stdio.h>

        char p_map[10][30][30] = {0};
        int stage = 0;
        int check_stage = 2;
        // 스테이지 클리어에 따른 값 변경 필요

int main(void)
{
        int i = 0;
        int j = 0;
        int k = 0;
        FILE * map;
        map = fopen("map.txt","r");

        do
        {
                fscanf(map, "%c", &p_map[stage][i][j]);

                if(p_map[stage][i][j] == 'm'){
                        stage++;
                        p_map[stage][0][0] = 'm';
                }

                if(p_map[stage][i][j] == '\n'){
                        i++;
                        k = j;
                        j=0;
                        continue;
                }

                j++;

                if(stage == check_stage)
                        break;
        }
        while(1);

        stage = 1;
        i = 1;
        j = 0;

        while (stage == check_stage - 1){

        if(p_map[stage][i][j] == 'm' && p_map[stage][i-1][k] == '\n')
                break;

        printf("%c", p_map[stage][i][j]);

        if(p_map[stage][i][j] == '\n'){
                i++;
                j=0;
                continue;
        }

        j++;
        }

        stage++;
        check_stage++;

fclose(map);
return 0;
}
                
